<div class="container">
  <div class="col-12 text-center title mt-4">
    <h2>{{ company.companyName }}</h2>
  </div>
  <hr />
  <div class="row mt-4">
    <div class="col-md-4 d-flex justify-content-center align-item-center">
      <img
        [src]="
          company.photo != null
            ? 'data:image/png;base64,' + company.photo.fileData
            : '/assets/LogoTemp.png'
        "
        alt="company logo"
        height="200px"
        width="200px"
      />
    </div>
    <div class="col-md-4 text-center contact">
      <p>
        <b><u>Kontakt:</u></b>
      </p>
      <ul>
        <li class="py-2">
          <b>strona www: </b>
          <p>{{ company.webSite }}</p>

          <b>strona www: </b>{{ company.webSite }}
        </li>
        <li class="py-2"><b>tel: </b> {{ company.phoneNumber }}</li>
        <li class="py-2"><b>email: </b> {{ company.emailAddress }}</li>
      </ul>
      <br />
      <p>
        <b><u>Rodzaj działalności:</u></b>
      </p>
      <ul>
        <li>{{ company.companyType }}</li>
      </ul>
      <br />
      <p>
        <b><u>Status według CEIDG:</u></b>
      </p>
      <ul>
        <li [ngStyle]="{ color: isCompanyActive ? 'black' : 'red' }">
          {{ company.statusFromCeidg }}
        </li>
      </ul>
      <br />
      <div>
        <div>
          <b><u> Data dołączenia do FPK :</u></b>
          {{ company.created | date: "dd/MM/yyyy" }}
        </div>
        <br />
        <div>
          <b><u> Data ostatniej aktualizacji:</u></b>
          {{ company.modify | date: "dd/MM/yyyy" }}
        </div>
      </div>
      <br />
    </div>

    <div class="col-md-4 text-center contact">
      <p>
        <b><u>Kody PKD według danych z CEIDG:</u></b>
      </p>
      <h5>
        <b><u>Główna Specjalizacja</u></b>
      </h5>
      <ul>
        <li>{{ company.mainPKD.symbol }} - {{ company.mainPKD.nazwa }}</li>
      </ul>
      <br />
      <h5>
        <b><u>Reszta kodów:</u></b>
      </h5>
      <ul>
        <li
          *ngFor="
            let pkd of collection
              | paginate: { itemsPerPage: 8, currentPage: p }
          "
        >
          {{ pkd.symbol }} - {{ pkd.nazwa }}
        </li>
      </ul>
      <br />
      <div class="inner">
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
      </div>
    </div>
  </div>
  <br /><br />
  <hr />
  <div class="description text-center">
    <h3>
      <b><u>Opis działalności</u></b>
    </h3>
    <p>{{ company.longDescription }}</p>
  </div>
  <br />
  <hr />
  <div class="description text-center">
    <h3>
      <b><u>Oferta</u></b>
    </h3>

    <div class="mat-elevation-z8 mb-2">
      <table mat-table [dataSource]="dataSource" matSort>
        <!-- Position Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef class="text-center">Nazwa</th>
          <td mat-cell *matCellDef="let element" class="service-name">
            {{ element.name }}
          </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef class="text-center">Cena</th>
          <td mat-cell *matCellDef="let element" class="price-column">
            {{ element.price | number: "1.2-2" }} zł
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>

      <mat-paginator
        [pageSizeOptions]="[5, 10, 20]"
        showFirstLastButtons
        aria-label="Wybierz ilość wierszy"
      >
      </mat-paginator>
    </div>
  </div>
  <hr />
  <div class="row">
    <div class="col-md-3 text-center">
      <p>
        <b><u>Adres rejestracji:</u></b>
      </p>
      <ul>
        <li>{{ company.street }}</li>
        <li>{{ company.postalCode }}</li>
        <li>{{ company.city }}</li>
      </ul>
      <div *ngIf="getIfAdditionalAddressIsTrue()">
        <p></p>

        <p>
          <b><u>Adres siedziby:</u></b>
        </p>
        <ul>
          <li>{{ company.officeStreet }}</li>
          <li>{{ company.officePostalCode }}</li>
          <li>{{ company.officeCity }}</li>
        </ul>
        <br />
      </div>
      <br />
      <p>
        <b><u>Gmina:</u></b>
      </p>
      <ul>
        <li>
          {{ company.municipalitie }}
          <img
            *ngIf="showArms"
            [src]="company.armsUrl"
            title="Herb gminy"
            class="my_arms"
          />
        </li>
        <img
          *ngIf="showArms"
          [src]="company.armsUrl"
          title="Herb gminy"
          class="my_arms2"
        />
      </ul>
    </div>
    <div *ngIf="showMaps" class="col-md-9 text-center address">
      <h3>
        <b><u>Mapa</u></b>
      </h3>
      <mat-tab-group
        mat-align-tabs="center"
        (selectedTabChange)="showMapFn($event)"
      >
        <mat-tab label="Adres rejestracji">
          <br />

          <img
            *ngIf="!useGeoportal"
            [src]="company.geolocationUrl"
            class="geolocation"
            title="Mapa z lokalizacja firmy"
          />
        </mat-tab>
        <mat-tab label="Adres biura" [disabled]="!isEnabledGeolocation2Url">
          <br />

          <img
            *ngIf="!useGeoportal"
            [src]="company.geolocation2Url"
            class="geolocation"
            title="Mapa z lokalizacja biura firmy"
          />
        </mat-tab>
      </mat-tab-group>
      <div *ngIf="useGeoportal">
        <div>
          <div id="iapi" class="center">
            <div id="gpApiPanel"></div>
          </div>
        </div>
        <br />
        <span id="gpApiText">Korzystamy z API:</span>
        <a href="https://geoportal.gov.pl" target="_blank">
          <img
            id="gpImg"
            src="https://mapy.geoportal.gov.pl/imap/resources/images/favicon.ico"
          />
          geoportal.gov.pl
        </a>
      </div>
    </div>
    <hr />
  </div>
  <br />
  <hr />
  <div class="d-flex justify-content-end">
    <button class="btn btn-back-to-home" [routerLink]="['']">
      Wróć do listy
    </button>
  </div>
</div>
